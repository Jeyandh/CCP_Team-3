<app-navbar></app-navbar>


<!--view project-->



<div class="container" id="projecttable">
  <!-- <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal" id="addProject">Add
    Project</button> -->

  <br>
  <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal" id="addProject">Add
    Project</button>
    
  <table class="table  table-striped table-bordered">
    <thead>

      <tr scope="row">
        <td scope="col">Project Id</td>
        <td scope="col">Project Name</td>
        <td scope="col">Start Date</td>
        <td scope="col">End Date </td>
        <td scope="col">DepartmentName</td>
        <td scope="col">DepartmentId</td>

        <td>Update/delete</td>

      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let project of projectList" scope="row">
        <td scope="col">{{project.projectId}}</td>
        <td scope="col">{{project.projectName}}</td>
        <td scope="col">{{project.startDate}}</td>
        <td scope="col">{{project.endDate}}</td>
        <td scope="col">{{project.departmentName}}</td>
        <td scope="col">{{project.department}}</td>

        <!-- <td scope="col">{{dep.users}}</td> -->
        <!-- <td scope="col">{{dep.project}}</td> -->
        <td>


          &nbsp;&nbsp;<i class="fa fa-edit" data-bs-toggle="modal" data-bs-target="#exampleModal1"
            (click)="dataCollect(project)"></i>&nbsp;
          <i class="fa fa-trash" (click)="delete(project)"></i>
        </td>


      </tr>

    </tbody>
  </table>

  <p>{{result}}</p>



</div>







<!--insert model-->

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Add Project Data</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form [formGroup]="myForm" id="myform">

          <select class="form-select" name="Region" id="" formControlName="regionId"
            (change)=" getdepartment(myForm.value)">
            <option value="" disabled selected hidden>Select Region</option>
            <option *ngFor="let reg of regList" [value]="reg.regionId">{{reg.regionName}}</option>
          </select>

          <div *ngIf="myForm.get('regionId')!.touched && myForm.get('regionId')!.invalid">

            <div *ngIf="myForm.get('regionId')!.hasError('required')">
              <div id="condition" style="color: red;">*Region Name is required</div>
            </div>

          </div>


          <br>

          <select class="form-select" id="inputSelectReason" class="form-control" formControlName="departmentId">
            <option value="" disabled selected hidden>Select Department</option>
            <option *ngFor="let dep of depList" [value]="dep.departmentId">{{dep.departmentName}}</option>
          </select>

          <div *ngIf="myForm.get('departmentId')!.touched && myForm.get('departmentId')!.invalid">

            <div *ngIf="myForm.get('departmentId')!.hasError('required')">
              <div id="condition" style="color: red;">*Department Name is required</div>
            </div>

          </div>

          <br>

          <input type="text" class="form-control" formControlName="projectName" placeholder="Project Name">
          <div *ngIf="myForm.get('projectName')!.touched && myForm.get('projectName')!.invalid">

            <div *ngIf="myForm.get('projectName')!.hasError('required')">
              <div id="condition" style="color: red;">Project Name is required</div>
            </div>
            <div *ngIf="myForm.get('projectName')!.hasError('pattern')">
              <div id="condition"> Invalid Project Name</div>

            </div>
          </div>
          <br>

          <label for="" id="Date">Start Date :</label>
          <input type="date" class="form-control" formControlName="startDate">
          <div *ngIf="myForm.get('startDate')!.touched && myForm.get('startDate')!.invalid">

            <div *ngIf="myForm.get('startDate')!.hasError('required')">
              <div id="condition" style="color: red;">*Start Date is required</div>
            </div>

          </div>

          <br>
          <label for="" id="Date">End Date :</label>
          <input type="date" class="form-control" formControlName="endDate">
          <div *ngIf="myForm.get('endDate')!.touched && myForm.get('endDate')!.invalid">

            <div *ngIf="myForm.get('endDate')!.hasError('required')">
              <div id="condition" style="color: red;">*End Date is required</div>
            </div>

          </div>
          <br>

          <br>
          <!-- <p style="color:red;">{{result}}</p> -->
          <!-- <button type="button" class="btn btn-primary" (click)="insert(myForm.value)">Insert</button> -->
          <p>{{result}}</p>


        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="insertProject(myForm.value)"
          [disabled]="!myForm.valid">Insert</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

      </div>
    </div>
  </div>
</div>


<!-- UPDATE -->

<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Add Project Data</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

        <form [formGroup]="myForm1" id="myform1">



           <label >Project Name : </label>
          <input type="text" class="form-control" formControlName="projectName"
            [placeholder]="projectDetail.projectName" [(ngModel)]="projectDetail.projectName">
          <div *ngIf="myForm.get('projectName')!.touched && myForm.get('projectName')!.invalid">

            <div *ngIf="myForm.get('projectName')!.hasError('required')">
              <div id="condition">Project Name is required</div>
            </div>
            <div *ngIf="myForm.get('projectName')!.hasError('pattern')">
              <div id="condition"> Invalid Name Id</div>

            </div>
          </div><br>


          <label >Project Id : </label>

          <input type="text" class="form-control" formControlName="projectId" [placeholder]="projectDetail.projectId"
            [(ngModel)]="projectDetail.projectId" readonly>
          <div *ngIf="myForm.get('projectId')!.touched && myForm.get('projectId')!.invalid">

            <div *ngIf="myForm.get('projectId')!.hasError('required')">
              <div id="condition">Project ID is required</div>
            </div>
            <div *ngIf="myForm.get('projectId')!.hasError('pattern')">
              <div id="condition"> Invalid Project Id</div>

            </div>
          </div><br>


          <label >Start Date :</label>

          <input type="date" class="form-control" formControlName="startDate" [placeholder]="projectDetail.startDate"
            [(ngModel)]="projectDetail.startDate">

            <div *ngIf="myForm.get('startDate')!.touched && myForm.get('startDate')!.invalid">

              <div *ngIf="myForm.get('startDate')!.hasError('required')">
                <div id="condition">start date is required</div>
              </div>
             </div>


            
            
          <br>
          <label >End Date: </label>

          <input type="date" class="form-control" formControlName="endDate" [placeholder]="projectDetail.endDate"
            [(ngModel)]="projectDetail.endDate">
          <br>


         <label for="">Department Name</label>
          <select id="inputSelectReason" class="form-control" formControlName="departmentId"
            [(ngModel)]="projectDetail.department">
            <!-- <option *ngIf="projectDetail.department" [ngValue]="projectDetail.department">{{projectDetail.departmentName}}</option> -->
            <option *ngFor="let dep of depList1" [value]="dep.departmentId!">{{dep.departmentName}}</option>
          </select>



          <br>
          <p>{{result}}</p>

        </form>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary " style="text-align: center;"
          (click)="updateProject(myForm1.value)" [disabled]="!myForm1.valid">Update</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

      </div>
    </div>
  </div>
</div>
