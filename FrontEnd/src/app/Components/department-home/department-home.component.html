
    <app-navbar></app-navbar>
      
   
  
  
    <!-- Insert Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Add Department Data</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">

            <form [formGroup]="myForm" id="myform">
              <!-- <mat-label>Region Id</mat-label> -->
  
              <input type="text" class="form-control" formControlName="departmentName" placeholder="Department Name">
              <div *ngIf="myForm.get('departmentName')!.touched && myForm.get('departmentName')!.invalid">
  
                <div *ngIf="myForm.get('departmentName')!.hasError('required')">
                  <div id="condition">Department Name is required</div>
                </div>
                <div *ngIf="myForm.get('departmentName')!.hasError('pattern')">
                  <div id="condition"> Invalid Department Name</div>
  
                </div>
              </div><br>
  
  
  
              <select class="form-select" id="inputSelectReason" class="form-control" formControlName="regionId" >
               <option value=""disabled selected hidden>Select Region</option>
                <option *ngFor="let reg of regList" [value]="reg.regionId">{{reg.regionName}}</option>
            </select>

            <br>

            
  
  
             
              <br>
              <!-- <p style="color:red;">{{result}}</p> -->
              <!-- <button type="button" class="btn btn-primary" (click)="insert(myForm.value)">Insert</button> -->
  
  
  
            </form><br>
          


      <p>{{result}}</p>
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" (click)="insertDepartment(myForm.value)" [disabled]="!myForm.valid">Insert</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            
          </div>
        </div>
      </div>
    </div>


<!--Update Modal-->

    <div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Add Department Data</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">

            <form [formGroup]="myForm1" id="myform1" >
              <!-- <mat-label>Region Id</mat-label> -->

              <label for="dId">Department Id :</label> 
              <input type="text" class="form-control" formControlName="departmentId"   [placeholder]="departmentDetail.departmentId" [(ngModel)]="departmentDetail.departmentId" readonly>
              <div *ngIf="myForm.get('departmentId')!.touched && myForm.get('departmentId')!.invalid">
  
                <div *ngIf="myForm.get('departmentId')!.hasError('required')">
                  <div id="condition">Department ID is required</div>
                </div>
                <div *ngIf="myForm.get('departmentId')!.hasError('pattern')">
                  <div id="condition"> Invalid Department ID</div>
  
                </div>
              </div><br>
  
              <label for="dName">Department Name :</label>
              <input type="text" class="form-control" formControlName="departmentName" placeholder="Department Name" 
              [placeholder]="departmentDetail.departmentName" [(ngModel)]="departmentDetail.departmentName">
              <div *ngIf="myForm.get('departmentName')!.touched && myForm.get('departmentName')!.invalid">
  
                <div *ngIf="myForm.get('departmentName')!.hasError('required')">
                  <div id="condition">Department Name is required</div>
                </div>
                <div *ngIf="myForm.get('departmentName')!.hasError('pattern')">
                  <div id="condition"> Invalid Department Name</div>
  
                </div>
              </div><br>
  
  
  
              <!-- <select class="form-select" id="inputSelectReason" class="form-control" formControlName="regionId"  >
               <option value=""disabled selected hidden>Select Region</option>
                <option *ngFor="let reg of regList" [value]="reg.regionId">{{reg.regionName}}</option>
            </select> -->

             
            <label for="">Region Name :</label>
            <select id="inputSelectReason" class="form-control" formControlName="regionId"  [(ngModel)]="departmentDetail.region">
              <!-- <option *ngIf="projectDetail.department" [ngValue]="projectDetail.department">{{projectDetail.departmentName}}</option> -->
              <option *ngFor="let reg of regList" [value]="reg.regionId">{{reg.regionName}}</option>
            </select>

            

           
            
  
  
             
              <br>
              <!-- <p style="color:red;">{{result}}</p> -->
              <!-- <button type="button" class="btn btn-primary" (click)="insert(myForm.value)">Insert</button> -->
  
  
  
            </form><br>
          


      <p>{{result}}</p>
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" (click)="updateDepartment(myForm1.value)" [disabled]="!myForm1.valid">Update</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            
          </div>
        </div>
      </div>
    </div>
   


    <div class="container">
      <!-- <h4 align="center">Department Details:</h4><br> -->
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal">Add Department</button>

      <br>
      <br>
      <table class="table  table-striped table-bordered">
        <thead>
    
          <tr scope="row">
            <td  scope="col">Department Id</td>
            <td scope="col">Department Name</td>
            <td scope="col">Regions </td>
            <!-- <td scope="col">Users</td> -->
            <!-- <td scope="col">Project </td> -->
            <td>Update/delete</td>
            
          </tr>
        </thead>
    
        <tbody>
          <tr *ngFor="let dep of depList" scope="row">
            <td scope="col">{{dep.departmentId}}</td>
            <td scope="col">{{dep.departmentName}}</td>
            <td scope="col" >{{dep.regionName}}</td>
            <!-- <td scope="col">{{dep.users}}</td> -->
            <!-- <td scope="col">{{dep.project}}</td> -->
            <td>
             
          
              &nbsp;&nbsp;<i class="fa fa-edit"  data-bs-toggle="modal" data-bs-target="#exampleModal1" (click)="dataCollect(dep)"></i>&nbsp;
            <i class="fa fa-trash" (click)="delete(dep)"></i> </td>
     
        
          </tr>
    
        </tbody>
      </table>
      <p>{{result}}</p>
    
    
    </div>
  

    
    
