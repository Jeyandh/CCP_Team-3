<app-navbar></app-navbar>

<div class="container">
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Add Region </h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>  
        <div class="modal-body">
          <form [formGroup]="myForm" id="myform">
            <!-- <mat-label>Region Id</mat-label> -->
            
            <input type="text" class="form-control" formControlName="regionName" placeholder="Region Name">
            <div *ngIf="myForm.get('regionName')!.touched && myForm.get('regionName')!.invalid">

              <div *ngIf="myForm.get('regionName')!.hasError('required')">
                <div id="condition">*Region Name is required</div>
              </div>
              <div *ngIf="myForm.get('regionName')!.hasError('pattern')">
                <div id="condition"> Invalid Region Name</div>

              </div>
            </div><br>



            <input type="text" class="form-control" formControlName="regionLocation" placeholder="Region Location">
            <div *ngIf="myForm.get('regionLocation')!.touched && myForm.get('regionLocation')!.invalid">

              <div *ngIf="myForm.get('regionLocation')!.hasError('required')">
                <div id="condition">*Region Location is required</div>
              </div>
              <div *ngIf="myForm.get('regionLocation')!.hasError('pattern')">
                <div id="condition"> Invalid Location</div>

              </div>
            </div><br>


            <input type="text" class="form-control" formControlName="regionTimezone" placeholder="Region Timezone">
            <div *ngIf="myForm.get('regionTimezone')!.touched && myForm.get('regionTimezone')!.invalid">

              <div *ngIf="myForm.get('regionTimezone')!.hasError('required')">
                <div id="condition">*TimeZone is required</div>
              </div>
              <div *ngIf="myForm.get('regionTimezone')!.hasError('pattern')">
                <div id="condition"> Invalid TimeZone</div>


              </div>

            </div><br>
            <br>
            <p style="color:rgb(39, 142, 26);">{{result}}</p>
            <!-- <button type="button" class="btn btn-primary" (click)="insert(myForm.value)">Insert</button> -->



          </form><br>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="insert(myForm.value)" [disabled]="myForm.invalid">Insert</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

        </div>
      </div>
    </div>
  </div>
  <!-- update -->
  <div class="modal fade" id="exampleModal-1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Update Region Data</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form [formGroup]="myForm1" id="myform1" *ngFor="let reg of regList2">
            <label  for="regionId">Region ID:</label>
            <input type="text" class="form-control" formControlName="regionId" [placeholder]="reg.regionId"
              [(ngModel)]="reg.regionId" readonly>
            <div *ngIf="myForm1.get('regionId')!.touched && myForm1.get('regionId')!.invalid">

              <div *ngIf="myForm1.get('regionId')!.hasError('required')">
                <div id="condition">*Region Id is required</div>
              </div>
              <div *ngIf="myForm1.get('regionId')!.hasError('pattern')">
                <div id="condition"> Invalid Region Id</div>

              </div>
            </div><br>

            <label  for="regionId">Region Name:</label>
            <input type="text" class="form-control" formControlName="regionName" [placeholder]="reg.regionName"
              [(ngModel)]="reg.regionName">
            <div *ngIf="myForm1.get('regionName')!.touched && myForm1.get('regionName')!.invalid">

              <div *ngIf="myForm1.get('regionName')!.hasError('required')">
                <div id="condition">*Region Name is required</div>
              </div>
              <div *ngIf="myForm1.get('regionName')!.hasError('pattern')">
                <div id="condition"> Invalid Region Name</div>

              </div>
            </div><br>
            
            <label  for="regionId">Region Location:</label>
            <input type="text" class="form-control" formControlName="regionLocation" [placeholder]="reg.regionLocation"
              [(ngModel)]="reg.regionLocation">
            <div *ngIf="myForm1.get('regionLocation')!.touched && myForm1.get('regionLocation')!.invalid">

              <div *ngIf="myForm1.get('regionLocation')!.hasError('required')">
                <div id="condition">*Region Location is required</div>
              </div>
              <div *ngIf="myForm1.get('regionLocation')!.hasError('pattern')">
                <div id="condition"> Invalid Location</div>

              </div>
            </div><br>

            <label  for="regionId">Region TimeZone:</label>
            <input type="text" class="form-control" formControlName="regionTimezone" [placeholder]="reg.regionTimezone"
              [(ngModel)]="reg.regionTimezone">
            <div *ngIf="myForm1.get('regionTimezone')!.touched && myForm.get('regionTimezone')!.invalid">

              <div *ngIf="myForm1.get('regionTimezone')!.hasError('required')">
                <div id="condition">TimeZone is required</div>
              </div>
              <div *ngIf="myForm1.get('regionTimezone')!.hasError('pattern')">
                <div id="condition"> Invalid TimeZone</div>


              </div>

            </div><br>
            <br>
            <p style="color:rgb(39, 142, 26);">{{result}}</p>
            <!-- <button type="button" class="btn btn-primary" (click)="insert(myForm.value)">Insert</button> -->

          </form><br>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="update(myForm1.value)" [disabled]="myForm1.invalid">Update</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

        </div>
      </div>
    </div>
  </div>


  <!-- <div class="container-fluid">
  <button class="btn btn-primary" routerLink="/Admin">Back</button>
</div> -->

  

  <div class="container">
    <h4 align="center">REGION DETAILS:</h4><br>


    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal">Add region</button>
<br>
    <br>
    <table class="table  table-striped table-bordered">
      <thead>

        <tr scope="row">
          <td scope="col">Region Id</td>
          <td scope="col">Region Name</td>
          <td scope="col">Region Location</td>
          <td scope="col">Region TimeZone</td>
          <td scope="col">Configure</td>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let reg of regList" scope="row">
          <td scope="col">{{reg.regionId}}</td>
          <td scope="col">{{reg.regionName}}</td>
          <td scope="col">{{reg.regionLocation}}</td>
          <td scope="col">{{reg.regionTimezone}}</td>
          <td>


            &nbsp;&nbsp;<i class="fa fa-edit" data-bs-toggle="modal" data-bs-target="#exampleModal-1"
              (click)="fetchDetails(reg.regionId)"></i>&nbsp;
            <i class="fa fa-trash" (click)="delete(reg)"></i>
          </td>


        </tr>

      </tbody>
    </table>
    <p>{{result}}</p>


  </div>
</div>